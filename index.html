<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Lyra User Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Lyra User Guide</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_lyra_form">Lyra Form</a>
<ul class="sectlevel2">
<li><a href="#_field_types">Field Types</a></li>
<li><a href="#_designing_a_form_from_scratch_in_five_steps">Designing a Form from Scratch in Five Steps</a></li>
<li><a href="#_afterreceiving_and_beforesending_methods">afterReceiving(&#8230;&#8203;) and beforeSending(&#8230;&#8203;) Methods</a></li>
<li><a href="#_beforeshow_method">beforeShow(&#8230;&#8203;) Method</a></li>
</ul>
</li>
<li><a href="#_form_attributes">Form Attributes</a></li>
<li><a href="#_field_attributes">Field Attributes</a>
<ul class="sectlevel2">
<li><a href="#_methods_of_setting_field_attributes">Methods of Setting Field Attributes</a></li>
</ul>
</li>
<li><a href="#_lyra_forms_implementation">Lyra Forms Implementation</a>
<ul class="sectlevel2">
<li><a href="#_implementation_example_with_comments">Implementation Example with Comments</a></li>
</ul>
</li>
<li><a href="#_client_part">Client part</a>
<ul class="sectlevel2">
<li><a href="#_the_lyra_config">The Lyra config</a></li>
<li><a href="#_lyra_context">Lyra context</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Lyra provides a quick way to develop user interface forms linked to <a href="https://courseorchestra.github.io/celesta/#data_accessors_section">Celesta cursors</a>.
Cursors can be filtered and sorted.</p>
</div>
<div class="paragraph">
<p>In order to use lyra, one should add the following dependency to their project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
&lt;groupId&gt;ru.curs&lt;/groupId&gt;
&lt;artifactId&gt;lyra&lt;/artifactId&gt;
&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lyra_form">Lyra Form</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lyra forms can be of two types:
Card and Grid.
Each form is defined by a class inherited from the appropriate base class (<a href="https://courseorchestra.github.io/lyra/apidocs/index.html?ru/curs/lyra/kernel/BasicCardForm.html"><code>BasicCardForm</code></a> or <a href="https://courseorchestra.github.io/lyra/apidocs/index.html?ru/curs/lyra/kernel/BasicGridForm.html"><code>BasicGridForm</code></a>).
The form itself is set declaratively and is characterized by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><a href="https://courseorchestra.github.io/celesta/#data_accessors_section">Cursor</a></strong>, to which the form is linked.
Each of the Lyra forms must override the <code>getCursor (CallContext context)</code> method, which returns the corresponding Celesta cursor.
If necessary, in the same method, filters and sorting can be applied to the cursor.</p>
</li>
<li>
<p><strong>set of bound and unbound fields</strong> displayed on the form.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Lyra takes on the task of transferring information between the form and the server, as well as navigating through the table records.
The grid form also by itself solves the problem of fast display, scrolling and positioning of the grid with a large number of records.
For the developer it is sufficient only to declare the fields they would like to have on the form, with order and properties.</p>
</div>
<div class="sect2">
<h3 id="_field_types">Field Types</h3>
<div class="paragraph">
<p>Fields, as already mentioned, can be of two types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>bound</strong> with the cursor field (i.e. column of the table), the values of the bound fields are stored in the database automatically,</p>
</li>
<li>
<p><strong>unbound</strong>, that is, not linked with any of the fields of the cursor, but with a getter/setter method of the form class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the user edits the bound fields, their new values are written into the fields of the cursor and stored in the database automatically.
The values of the unbound fields are passed as parameters to the appropriate methods, and Java code executed on the server can use these values.</p>
</div>
</div>
<div class="sect2">
<h3 id="_designing_a_form_from_scratch_in_five_steps">Designing a Form from Scratch in Five Steps</h3>
<div class="paragraph">
<p>To create a Lyra form from scratch, you must follow the following steps:</p>
</div>
<div class="paragraph">
<p><strong>Step 1.</strong> Create a class inherited from <a href="https://courseorchestra.github.io/lyra/apidocs/index.html?ru/curs/lyra/kernel/BasicCardForm.html"><code>BasicCardForm</code></a> or <a href="https://courseorchestra.github.io/lyra/apidocs/index.html?ru/curs/lyra/kernel/BasicGridForm.html"><code>BasicGridForm</code></a>, optionally annotated with <a href="https://courseorchestra.github.io/lyra/apidocs/index.html?ru/curs/lyra/kernel/annotations/LyraForm.html"><code>@LyraForm</code></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">class TestForm extends BasicCardForm{
....
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@LyraForm(gridwidth="600px",
      gridheight="200px")
class TestForm extends BasicGridForm{
....
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you add <a href="https://courseorchestra.github.io/lyra/apidocs/index.html?ru/curs/lyra/service/FormInstantiationParameters.html"><code>FormInstantiationParameters</code></a> argument to the form&#8217;s constructor, the respective object will be passed to the constructor automatically.
You may also define
<code>FormInstantiationParameters</code> field annotated with <a href="https://courseorchestra.github.io/lyra/apidocs/index.html?ru/curs/lyra/kernel/annotations/FormParams.html"><code>@FormParams</code></a> annotation, and its value will be automatically injected.</p>
</div>
<div class="paragraph">
<p><strong>Step 2</strong>.
Override <code>getCursor(CallContext context)</code> method so it returns sorted and filtered cursor.
You may use
<code>FormInstantiationParameters</code> object defined in the previous step to define sorting and filtering.</p>
</div>
<div class="paragraph">
<p>This cursor is going to be the source of the record set for the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">   TestCursor getCursor(CallContext context){
        TestCursor result = new TestCursor(context);
        result.setRange("myField", myFilterValue);
        return result;
   }</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 3 (optional).</strong> If you need unbounded fields on the form, you should declare them as getters and, optionally, setters, annotated with <a href="https://courseorchestra.github.io/lyra/apidocs/index.html?ru/curs/lyra/kernel/annotations/FormField.html"><code>@FormField</code></a>.
Getters / setters should follow the Java getter/setter names convention:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    @FormField(celestatype="INT",
               caption="Подпись поля",
               width=30)
    public int getMyField() {
        return this.my;
    }

    public void setMyField(int value) {
       this.my = value;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 3 (optional).</strong> You may use CelestaSQL&#8217;s <a href="https://courseorchestra.github.io/celesta/#_celestadoc">CelestaDoc</a> to set the bound field&#8217;s properties.
You may omit this step as well: first, Lyra will choose reasonable default values (e.g. table field name for caption, as needed in most cases); second, all the properties definitions can be set in the form&#8217;s class itself.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">create table test (
/**
 {"caption": "Identifier"}
 */
id int not null default seq primary key,

/**
 {"caption": "Integer Value"}
 */
attrInt int default 3
);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Step 5</strong>.
In the form class constructor, define the set and order of form fields by calling the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LyraFormField createField(String name)</code> adds a field with the given name to the form and returns an object of type <code>LyraFormField</code>.
The name value must match</p>
<div class="ulist">
<ul>
<li>
<p>either one of the column names of the form cursor (this creates a bound field),</p>
</li>
<li>
<p>or with the name of the property of the form class declared with <a href="https://courseorchestra.github.io/lyra/apidocs/index.html?ru/curs/lyra/kernel/annotations/FormField.html"><code>@FormField</code></a> annotation, this creates and unbound field.
The respective methods must be named according to common convention, e. g. <code>int getSomething(..)</code> for integer property named <code>something</code>, or <code>boolean isSomething(..)</code> if the type of the property is <code>boolean</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The type of unbound field is determined from the return type of <code>@FormField</code>-annotated method in the following way:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lyra Form Type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ru.curs.celesta.dbutils.BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATETIME</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REAL</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>@FormField</code>-annotated method can either have or don&#8217;t have the <code>CallContext</code> parameter.</p>
</div>
<div class="paragraph">
<p>The <a href="https://courseorchestra.github.io/lyra/apidocs/index.html?ru/curs/lyra/kernel/LyraFormField.html"><code>LyraFormField</code></a> object returned by the <code>createField</code> method afterwards can be modified via its properties.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>createAllBoundFields()</code>, which is equivalent to calling the <code>createField</code> method for each of the table fields.</p>
</li>
<li>
<p><code>createAllUnboundFields()</code>, which is equivalent to calling the <code>createField</code> method for each of the properties of a class declared with <code>@FormField</code> annotation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, if we want all unbound fields in the form to go first, and then all bound fields, and we are satisfied with the default (<code>CelestaDoc</code> or annotation-set) field property values, then we can write this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    public TestForm(CallContext context){
        super(context);
        createAllUnboundFields();
        createAllBoundFields();
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>When writing a form constructor, the developer can choose one of the strategies so that the code is the most elegant, concise and flexible.
As a rule, the choice of strategy is determined by one of the typical scenarios that one has to face:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Scenario</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Form construction strategy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">There is only one table-based form in the entire application. Or there can be many forms for one table, but on any form you need to display all the fields of the table or view in accordance with the CelestaDoc-specified properties.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You should use the <code>createAllBoundFields()</code> method, setting the CelestaDoc for the fields, if necessary. In particular, if no CelestaDoc is specified, a form containing all fields of the table will be constructed, and the names of these fields will be used as captions, which is very convenient for quick-and-dirty grid construction. Fields that have <code>visible = False</code> at the CelestaDoc level will not be displayed on the form. To add all unbound fields, use the <code>createAllUnboundFields()</code> method.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only a very small quantity of the fields should be displayed on the form, or the form should be made very specific, not paying attention to what is indicated in CelestaDoc.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You should use several calls to the <code>createField(name)</code> method for each of the fields. If necessary, the properties of objects returned by calls to this method can be changed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">In general, the properties specified in CelestaDoc are fine, but for some of the fields you need to override them.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You must first use the <code>createAllBoundFields()</code> method to add all the fields with their properties taken from CelestaDoc, and then, after receiving the metadata for each of the created fields using the <code>getFieldsMeta(&#8230;&#8203;)</code> method, alter them via their  property setters.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Note that field names within a form must be unique, just as field names in a table.
Therefore, calling the  <code>createAllBoundFields()</code> method twice, as well as calling the <code>createField(name)</code> method twice for the same name, will lead to an error.
An error will also result in creating an unbound field with a name coinciding with a table field added to the form.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_afterreceiving_and_beforesending_methods">afterReceiving(&#8230;&#8203;) and beforeSending(&#8230;&#8203;) Methods</h3>
<div class="paragraph">
<p>A form class may and should also contain business logic that performs certain actions when values are entered by a user into a form.
Two main entry points available in each of form classes are</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">void afterReceiving (BasicCursor c)

void beforeSending (BasicCursor c)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>afterReceiving (BasicCursor c)</code> method is called after receiving form data from the client, but before the data is flushed to the database.
Thus, if you change the cursor fields in it, then the changed values will be transferred into the database.
The argument <code>c</code> contains a cursor with fields that come from the form.</p>
</div>
<div class="paragraph">
<p>The <code>beforeSending (BasicCursor c)</code> method is called before serialization of data and sending it to the form.
Thus, if you change the fields in it, the modified values will be displayed on the form.
The argument <code>c</code> contains a cursor with fields that come from the database.</p>
</div>
<div class="paragraph">
<p>Business logic can also be contained in getters and setters of unbound fields.</p>
</div>
</div>
<div class="sect2">
<h3 id="_beforeshow_method">beforeShow(&#8230;&#8203;) Method</h3>
<div class="paragraph">
<p>The method is invoked before the form is displayed to the user.
In this method, some preparatory actions can be performed: for example, the cursor can be positioned on the desired record.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_form_attributes">Form Attributes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each form has a set of attributes that can be defined using optional named parameters of <code>@LyraForm</code> annotation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>gridwidth</code> — ширина грида (в пискелах)</p>
</li>
<li>
<p><code>gridheight</code> — высота грида (в пикселах)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_field_attributes">Field Attributes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each form field (<code>LyraFormField</code> class instance) has a set of following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>caption</code> — 'human-readable' caption of the field.</p>
</li>
<li>
<p><code>editable</code> — set to <code>false</code>, is the field needs to be read-only.</p>
</li>
<li>
<p><code>sortable</code> — indicates whether or not the grid should allow sorting by values in this field, by clicking on the column&#8217;s header cell.
Defaults to true.</p>
</li>
<li>
<p><code>visible</code> — set to <code>false</code>, if the field needs to be hidden from form.</p>
</li>
<li>
<p><code>required</code> — required field.
<strong>Warning</strong>: bound fields related to <code>not null</code> table fields will be always treated as required, regardless of the value of <code>required</code> property.</p>
</li>
<li>
<p><code>scale</code> — maximum decimal point numbers (for <code>REAL</code>-typed fields).</p>
</li>
<li>
<p><code>width</code> — visible width of the field (in pixels).</p>
</li>
<li>
<p><code>dateFormat</code> — format of the datetime field.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_methods_of_setting_field_attributes">Methods of Setting Field Attributes</h3>
<div class="paragraph">
<p>So, the properties of form fields in Lyra can be set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>design time</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>for bound fields in table fields' <code>CelestaDoc</code>,</p>
</li>
<li>
<p>for unbound fields by setting the properties of the <code>@FormField</code> annotation.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In <strong>run time</strong>: for any fields by changing the properties of the <code>LyraFormField</code> object, obtained either by calling the <code>createField(name)</code> method, or by retrieving from the dictionary returned by the <code>getFieldsMeta()</code> method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To set the field attributes for Lyra in CelestaDoc, you need to insert an object in JSON format into CelestaDoc, for example, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">CREATE TABLE table1
(
  /** {"caption": "human-readable field name",
       "visible": false}*/
  column1  INT NOT NULL IDENTITY PRIMARY KEY,
  /** игнорируемый текст {"caption": "field name with \"quoted\" words",
       "editable": false,
       "visible": true} this text will be ignored*/
  column2  REAL,
  column3 BIT NOT NULL DEFAULT 'FALSE'
 );</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Setting the field attributes in CelestaDoc is convenient because the attribute specified in one place (i. e. in the CelestaSQL script) will be used by default in all forms that use the corresponding table as a data source.
If needed, in each specific form, you can always redefine attributes at run time.
If the form using the table is only one, then the correct approach is to set the corresponding field attributes directly in CelestaDoc.
Note that the system automatically selects from the CelestaDoc <strong>text the first occurring JSON object</strong>, ignoring the rest of the text content that may also be present there for other purposes.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>@FormField</code> annotation is added to functions that return the values of unbound fields, and also has parameters <code>caption</code>, <code>editable</code>,` visible`, etc.
These are optional parameters that correspond to the field attributes of the same name.</p>
</div>
<div class="paragraph">
<p>If multiple values of the same property are defined in different places, they get overwritten in a certain order.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Property</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Precedence order for unbound fields</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Precedence order for bound fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>caption</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. @FormField annotation&#8217;s <code>caption</code> parameter,</p>
<p class="tableblock">2. if not set, then the getter method name.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. table field&#8217;s CelestaDoc (<code>caption</code> attribute),
2. if not set, then the table field&#8217;s name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>editable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. @FormField annotation&#8217;s <code>editable</code> parameter,</p>
<p class="tableblock">2. or else <code>true</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. CelestaDoc&#8217;s <code>editable</code> attribute,</p>
<p class="tableblock">2. if not set, then <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>visible</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. @FormField annotation&#8217;s <code>visible</code> parameter,</p>
<p class="tableblock">2. if not set, then <code>true</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1. table field&#8217;s CelestaDoc (<code>visible</code> attribute),</p>
<p class="tableblock">2. if not set, then <code>true</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lyra_forms_implementation">Lyra Forms Implementation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below is a UML diagram of Lyra’s Java classes:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Lyra.png" alt="Lyra">
</div>
</div>
<div class="paragraph">
<p>TODO: redraw this diagram in PlantUML</p>
</div>
<div class="sect2">
<h3 id="_implementation_example_with_comments">Implementation Example with Comments</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@LyraForm(gridWidth = 100, gridHeight = 10)
public class TestForm extends BasicGridForm&lt;OrderLineCursor&gt; {

    //Constructor will be run only once: each form is a Spring's singleton Component
    public TestForm(CallContext c, GridRefinementHandler handler) {
        super(c, handler);
        //First, we add to the form all the table's fields in the order they declared in SQL
        createAllBoundFields();

        //Add a field to the form and then alter its caption
        LyraFormField f = createField("field2");
        f.setCaption("Unbound field caption");

        //Add a field to a form with default attributes (inherited from CelestaDoc or chosen by default)
        createField("field1");
    }

    @Override
    public OrderLineCursor getCursor(CallContext callContext) {
        //sorting and filtering can also be performed here
        return new OrderLineCursor(callContext);
    }

    @FormField(caption = "Field Caption")
    public String getField1(CallContext ctx) {
        return "foo";
    }

    public void beforeSending(OrderLineCursor c){
        //do something before the cursor is serialized and sent to the form
    }

}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_client_part">Client part</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_lyra_config">The Lyra config</h3>
<div class="paragraph">
<p>The Lyra config should be specified as a function that returns the config object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>function getLyraConfig() {
    return {
        baseUrl: "http://localhost:8081",
    };
}

window.getLyraConfig = getLyraConfig;</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Property</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>baseUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It&#8217;s a base URL to which the Lyra&#8217;s endpoint paths are appended.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_lyra_context">Lyra context</h3>
<div class="paragraph">
<p>Lyra context is an object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    {
        part1: 'part1',
        part2: 'part2',
        refreshParams:
            {
                selectKey: ['74000004000079300'],
                sort: ['name', 'code'],
                filter: {
                    condition1: 'filter conditions1',
                    condition2: 'filter conditions2',
                }
            }
    };</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>part1, part2 - arbitrary parameters,</p>
</li>
<li>
<p>refreshParams - parameters used to build the Lyra grid on the server:</p>
<div class="ulist">
<ul>
<li>
<p>selectKey - primary key for positioning on a specific record,</p>
</li>
<li>
<p>sort - sorting conditions,</p>
</li>
<li>
<p>filter - filter conditions.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-06-15 10:58:02 UTC
</div>
</div>
</body>
</html>